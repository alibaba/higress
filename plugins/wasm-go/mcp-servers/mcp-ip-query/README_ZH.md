# ip查询位置

API认证需要的APP Code请在阿里云API市场申请: https://market.aliyun.com/apimarket/detail/cmapi00054907

## 什么是云市场API MCP服务

阿里云云市场是生态伙伴的交易服务平台，我们致力于为合作伙伴提供覆盖上云、商业化和售卖的全链路服务，帮助客户高效获取、部署和管理优质生态产品。云市场的API服务涵盖以下几个类目：应用开发、身份验证与金融、车辆交通与物流、企业服务、短信与运营商、AI应用与OCR、生活服务。
云市场API依托Higress提供MCP服务，您只需在云市场完成订阅并获取AppCode，通过Higress MCP Server进行配置，即可无缝集成云市场API服务。

## 如何在使用云市场API MCP服务

1. 进入API详情页，订阅该API。您可以优先使用免费试用。
2. 前往云市场用户控制台，使用阿里云账号登陆后查看已订阅API服务的AppCode，并配置到Higress MCP Server的配置中。注意：在阿里云市场订阅API服务后，您将获得AppCode。对于您订阅的所有API服务，此AppCode是相同的，您只需使用这一个AppCode即可访问所有已订阅的API服务。
3. 云市场用户控制台会实时展示已订阅的预付费API服务的可用额度，如您免费试用额度已用完，您可以选择重新订阅。

# MCP服务器配置功能简介

## 功能简介

该服务可以基于用户的IP分析用户所在位置，可以无需主动提供IP，支持IP自动获取（基于API网关的能力）。位置信息还可以用于确定用户所在的时区，从而提供基于用户位置的精确本地时间。

## 工具简介

### IP地址查询升级版

- **用途**：此工具允许用户输入一个IP地址（支持IPv6），然后返回该地址所对应的详细位置信息。
- **使用场景**：适用于需要获取访客或客户端精确地理定位的应用程序开发中，如在线广告投放、内容本地化服务等领域。
- **请求参数**：
  - `ip` (必填)：待查询的IP地址。
- **响应结构**：返回JSON格式的数据，其中包含了查询结果的状态码、具体的地理位置信息（例如城市名、区县编码等）、状态消息及本次请求的任务编号。
- **注意点**：除了基础的位置信息外，还包括了经纬度坐标。

### IP地址查询精准版

- **用途**：相比上一版本，该工具在提供基本地理位置的同时增加了更多维度的信息，比如运营商名称、时区等，并且对于IPv4地址不会返回经纬度数据。
- **使用场景**：适合于那些不仅关心访问者来自哪里，还需要了解其网络环境特点的服务，比如网络安全监控系统或是全球分布式应用的设计。
- **请求参数**：
  - `ip` (必填)：需查询的IP地址。
- **响应结构**：同样以JSON形式呈现，内容丰富多样，从大洲到邮编均有覆盖，同时也保留了任务标识符以便追踪。
- **特点**：增强了信息的全面性，特别是针对IPv4和IPv6的不同处理方式使得它成为了一个更为灵活的选择。
